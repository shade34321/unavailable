.orig x3000
	LD R1, TESTNEGA
	LD R0, TESTPOSI
	LD R2, INITIAL
	LD R3, COUNTER
TESTARY	STI R0, INITIAL
	ADD R0, R0, #1
	ADD R2, R2, #1
	ST R2, INITIAL
	STI R1, INITIAL
	ADD R1, R1, #-1
	ADD R2, R2, #1
	ST R2, INITIAL
	ADD R3, R3, #-1
	BRzp TESTARY

	LDI R0, ARRAY
	AND R1, R1, 0 ; Clears R1	
	STI R1, MIN
	STI R1, MAX
	AND R2, R2, 0
	LD R3, ARRAY
	LD R4, OVERDRIVE
	NOT R4, R4
	ADD R4, R4, #1
	LDI R6, FIND
	NOT R6, R6
	ADD R6, R6, #1

LOOP	LDI R2, MIN
	NOT R2, R2
	ADD R2, R2, #1
	ADD R2, R2, R0
	BRn MINI

	LDI R2, MAX
	NOT R2, R2
	ADD R2, R2, #1
	ADD R2, R2, R0	
	BRzp MAXI

	

JUMPER	ADD R7, R6, R0
	BRz OCCUR

FIN	ADD R3, R3, #1
	ST R3, ARRAY
	LDI R0, ARRAY
	ADD R3, R3, #1
	ADD R5, R4, R3	
	BRnz LOOP
	BRp KILL

MAXI	STI R0, MAX
	BRnzp JUMPER

MINI	STI R0, MIN
	BRnzp JUMPER

OCCUR	LDI R7, OCUR
	ADD R7, R7, #1
	STI R7, OCUR
	BRnzp FIN	

KILL HALT
INITIAL .fill x5000
TESTNEGA .fill #-1
TESTPOSI .fill #1
COUNTER .fill #10
OVERDRIVE .fill x8000
MIN .fill x6001
MAX .fill x6002
FIND .fill x6000
OCUR .fill x6003
ARRAY .fill x5000
.end
